<!doctype html>
<meta charset="utf8">
<title>Homework 1 (HTML) - CS 3550</title>
<link rel="icon" href="/static/favicon.ico">
<link rel="stylesheet" href="/static/main.css">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;700&family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">

{% include "header.html" with title=assignment.title %}

<main>
    <header>
        <h2>{{ assignment.title }}</h2>
        <p>All grades out of {{ assignment.points }}</p>
    </header>

    <form action="/{{ assignment.id }}/submissions" method="post">
        {% csrf_token %}

        {% if errors.invalid_submission %}
            {% for error in errors.invalid_submission %}
                <output class="error">{{ error }}</output><br>
            {% endfor %}
        {% endif %}

        <table>
            <thead>
                <th>Student</th>
                <th>Submission</th>
                <th>Grade</th>
                <th>Errors</th>
            </thead>
            <tbody>
                {% for submission in submissions %}
                <tr>
                    <td>{{ submission.author.get_full_name }}</td>
                    <td><a href="{{ submission.file.url }}">View Submission</a></td>
                    <td><input type="number" name="grade-{{ submission.id }}" value="{{ submission.score }}" min="0" step="0.01"
                        max="{{ assignment.points }}" 
                        {% if submission.id in errors %} class="invalid" {% endif %}/>
                    </td>
                    <td>
                        {% if errors.get(submission.id) %}
                            {% for error in errors[submission.id] %}
                                <output class="error">{{ error }}</output><br>
                            {% endfor %}
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    
        <section class="sub-links">
            <button tabindex="3">Submit</button>
            <a href="/{{ assignment.id }}/">Back to assignment</a>
        </section>
    </form>
</main>